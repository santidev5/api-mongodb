(async()=>{document.querySelectorAll("#delete").forEach(e=>{e.addEventListener("click",e=>{(async e=>{var{state:t,msg:a}=await(t=await fetch("/"+e,{method:"DELETE"})).json(),t=(1===t&&document.querySelector(`[data-id='${e}']`).remove(),a),e=document.querySelector(".alerts"),a=(e&&e.remove(),(e=document.createElement("DIV")).classList.add("alerts"),document.createElement("P")),s=(a.classList.add("alert","text-center"),a.textContent=t,e.appendChild(a),document.body.insertBefore(e,document.querySelector(".movies")),e);setTimeout(()=>{s.remove()},1500)})(e.target.closest(".movie").dataset.id)})})})(),(async()=>{document.querySelectorAll("#edit").forEach(e=>{e.addEventListener("click",()=>{{var o=document.querySelector(".modal-container");o&&o.remove();let e=document.createElement("DIV"),t=(e.classList.add("modal-container"),document.createElement("DIALOG")),a=(t.classList.add("modal"),document.createElement("FORM")),s=(a.classList.add("form"),[{tag:"LABEL",classess:["form__label"],attributes:{for:"title",textContent:"Title"}},{tag:"INPUT",classess:["form__input"],attributes:{type:"text",name:"title",id:"title",placeholder:"Movie title"}},{tag:"LABEL",classess:["form__label"],attributes:{for:"year",textContent:"Year"}},{tag:"INPUT",classess:["form__input"],attributes:{type:"number",name:"year",id:"year",placeholder:"Movie year"}},{tag:"LABEL",classess:["form__label"],attributes:{for:"genres",textContent:"Genres"}},{tag:"INPUT",classess:["form__input"],attributes:{type:"text",name:"genres",id:"genres",placeholder:'Movie genres separated by "," '}},{tag:"LABEL",classess:["form__label"],attributes:{for:"image",textContent:"Image"}},{tag:"INPUT",classess:["form__input"],attributes:{type:"file",accept:".jpg,.webp,.png,.jpge",name:"image",id:"image",placeholder:"Movie image"}},{tag:"BUTTON",classess:["form__button","form__button--cancel"],attributes:{textContent:"Cancel"}},{tag:"BUTTON",classess:["form__button","form__button--save"],attributes:{textContent:"Save changes"}}].forEach(e=>{e=((e,t,a)=>{var s,r,o=document.createElement(e);for(s of t)o.classList.add(s);for(r in a)o[r]=a[r];return o})(e.tag,e.classess,e.attributes);a.appendChild(e)}),t.appendChild(a),e.appendChild(t),document.createDocumentFragment()),r=(s.appendChild(e),document.querySelector(".main"));document.body.insertBefore(s,r)}document.querySelector(".modal").showModal()})})})();