(async()=>{async function c(){for(var e=document.querySelector(".movies");0<e.children.length;)e.firstElementChild.remove();var t=(await(async()=>{var e=new URLSearchParams(window.location.search).get("page");try{var{movies:t,pages:a}=await(await fetch("/api/movies?page="+e)).json();return{pagination:{pages:parseInt(a),page:parseInt(e)},movies:t}}catch(e){i("404 not found"),document.querySelector(".pagination").remove()}})()).movies;if(0<t.length){let d=document.createDocumentFragment();t.forEach(e=>{e=e,(t=document.createElement("DIV")).classList.add("movie"),t.dataset.id=e._id,a=(e=>{var t=document.createElement("DIV"),a=(t.classList.add("movie__poster-container"),document.createElement("IMG"));return a.classList.add("movie__poster"),a.src=e.poster??"https://kzmnnrx7q0ns0pyx3ccz.lite.vusercontent.net/placeholder.svg?height=450&width=300",a.alt=e.title,a.loading="lazy",a.width=280,a.heigth=420,t.appendChild(a),t})(e),n=(e=>{let t=document.createElement("DIV"),a=(t.classList.add("movie__content"),document.createElement("DIV")),n=(a.classList.add("movie__header"),document.createElement("H2")),d=(n.classList.add("movie__heading"),n.title=e.title,n.textContent=e.title,document.createElement("SPAN")),c=(d.classList.add("movie__year"),d.textContent=e.year,a.appendChild(n),a.appendChild(d),document.createElement("ul"));return c.classList.add("movie__genres"),e.genres.forEach(e=>{var t=document.createElement("li");t.classList.add("movie__genre"),t.textContent=e,c.appendChild(t)}),t.appendChild(a),t.appendChild(c),t})(e),e=(({_id:e})=>{var t=document.createElement("DIV"),a=(t.classList.add("movie__actions"),document.createElement("BUTTON")),n=(a.classList.add("movie__action","movie__action--edit"),a.title="Edit movie",a.onclick=()=>{modal.showModal()},document.createElement("IMG"));n.classList.add("movie__action-icon"),n.src="/src/images/pencil.svg",n.alt="pen icon",a.append(n);(n=document.createElement("BUTTON")).classList.add("movie__action","movie__action--delete"),n.title="Delete movie",n.onclick=()=>{(async e=>{try{var{state:t,msg:a}=await(await fetch("/"+e,{method:"DELETE"})).json();1===t&&document.querySelector(`[data-id='${e}']`).remove(),i(a)}catch(e){i("404 not found, movie couldn't be deleted")}c()})(e)};var d=document.createElement("IMG");return d.classList.add("movie__action-icon"),d.src="/src/images/trash.svg",d.alt="trash icon",n.appendChild(d),t.appendChild(a),t.appendChild(n),t})(e),n.appendChild(e),t.appendChild(a),t.appendChild(n);var t,a,n,e=t;d.appendChild(e)}),e.appendChild(d)}}function i(e){var t,a=document.querySelector(".alerts"),n=document.createElement("P");n.classList.add("alert","text-center"),n.textContent=e,a.children.length<0&&a.appendChild(n),t=n,setTimeout(()=>{t.remove()},1500)}c()})();let modal=document.querySelector(".modal");document.querySelector(".form__button--cancel").addEventListener("click",e=>{e.preventDefault(),modal.close()});
//# sourceMappingURL=bundle.min.js.map
